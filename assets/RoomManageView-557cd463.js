import{x as C,u as j,r,f as O,e as m,q as H,o as a,c,a as e,n as N,i as h,h as x,t as f,l as _,k as p,m as $,p as M}from"./index-e8cc82c4.js";import{u as D,_ as g}from"./LoadingCircleIcon-83a13acb.js";import{_ as L}from"./ToastModal-d7eba799.js";const B={key:0,class:"absolute top-36 flex flex-col w-full"},U={key:1,class:"absolute top-36 flex flex-col w-full"},Y={class:"flex justify-center my-16"},F={key:2,class:"absolute top-36 flex w-full justify-center"},z={class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg my-20"},K={class:"flex justify-center md:justify-end -mt-16"},q=["alt","src"],P={class:"text-gray-800 text-3xl font-semibold"},G={class:"text-sm font-normal"},J={class:"mt-6 text-gray-600"},Q={class:"mt-6 text-gray-600"},W=["innerHTML"],X={class:"w-full mb-4 text-gray-600 flex rounded bg-white shadow-md"},Z=["value"],ee={class:"flex justify-end mt-8"},te={key:1},ne={__name:"RoomManageView",setup(se){const{VITE_FREYA_INTE_HOST:w}={VITE_HOME_INTE_HOST:"https://web-tech.tw",VITE_SARA_INTE_HOST:"https://web-tech.tw/sara",VITE_SARA_TOKEN_NAME:"unified_token",VITE_FREYA_INTE_HOST:"https://web-tech.tw/freya",VITE_FREYA_RECV_HOST:"https://web-tech.tw/recv/freya",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAAAz8kwCfcwYC8fgp",BASE_URL:"/freya/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E=C(),T=j(),y=D(),{roomCode:n}=E.params,i=r(!1),v=r(!1),u=r(!1),d=r(!1),l=r(""),s=O({label:"",members:0,description:"",backgroundImage:""}),b=m(()=>`${w}/#/ti/g2/${n}`),k=m(()=>{const{description:t}=s;return t==null?void 0:t.replaceAll(`
`,"<br />")}),I=m(()=>{const{backgroundImage:t}=s;return{backgroundImage:`url(${t})`,filter:"brightness(0.3)",height:"100vh"}}),A=async()=>{if(!navigator.clipboard){l.value="您的瀏覽器不支援複製功能";return}try{await navigator.clipboard.writeText(b.value),l.value="已複製邀請網址",d.value=!0,setTimeout(()=>{d.value=!1},3e3)}catch(t){l.value="無法複製邀請網址",console.error(t)}},V=async()=>{u.value=!0;const t=await y.patch(`rooms/${n}`).json();Object.assign(s,t),l.value="更新成功",u.value=!1},R=()=>{T.push(`/rooms/${n}/submissions`)};return H(async()=>{i.value=!0;try{const t=await y.get(`rooms/${n}`).json();Object.assign(s,t)}catch(t){v.value=!0,console.error(t)}i.value=!1}),(t,o)=>(a(),c("div",null,[e("div",{style:N(I.value)},null,4),v.value?(a(),c("div",B,o[1]||(o[1]=[e("div",{class:"text-center text-red-500"}," 發生錯誤 ",-1)]))):i.value?(a(),c("div",U,[e("div",Y,[h(g,{class:"h-8 w-8 animate-spin text-lime-600"})])])):(a(),c("div",F,[e("div",z,[e("div",K,[e("img",{alt:s.label,src:s.backgroundImage,class:"w-20 h-20 object-cover rounded-full border-2 border-white-500"},null,8,q)]),e("div",null,[e("h2",P,[x(f(s.label)+" ",1),e("span",G,f(_(n)),1)]),e("p",J," 成員人數："+f(s.members),1),e("div",Q,[o[2]||(o[2]=x(" 簡介： ")),e("p",{class:"my-2 mx-1 text-gray-800 text-sm",innerHTML:k.value},null,8,W)]),o[3]||(o[3]=e("p",{class:"mt-4 text-gray-600"}," 社群邀請網址： ",-1)),e("div",X,[e("input",{value:b.value,class:"w-full border-none bg-transparent px-4 py-3 text-gray-900 outline-none focus:outline-none text-gray-500",type:"text",readonly:""},null,8,Z),e("button",{title:"複製",class:"m-2 rounded px-4 py-2 font-semibold",onClick:A},[d.value?(a(),p(_($),{key:0,class:"h-6 w-6"})):(a(),p(_(M),{key:1,class:"h-6 w-6"}))])])]),e("div",ee,[e("button",{class:"flex items-center justify-center bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-full mr-3",onClick:V},[u.value?(a(),p(g,{key:0,class:"h-6 w-6 animate-spin"})):(a(),c("span",te," 更新資訊 "))]),e("button",{class:"flex items-center justify-center bg-green-700 hover:bg-green-800 text-white font-bold py-2 px-4 rounded-full",onClick:R}," 進入審核系統 ")])])])),h(L,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=S=>l.value=S)},null,8,["modelValue"])]))}};export{ne as default};
