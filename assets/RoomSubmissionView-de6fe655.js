import{x as B,r as f,f as w,e as _,y as D,q as S,o as a,c as r,a as e,n as A,h as p,t as i,l as u,j as I,v as N,k as x,i as g,z as k,A as M,B as z,C as L,D as O}from"./index-61f8d724.js";import{u as R,_ as j}from"./LoadingCircleIcon-c57c0676.js";import{_ as T}from"./ToastModal-0603744d.js";const U={class:"absolute top-36 flex flex-col w-full justify-start"},q={class:"w-full flex justify-center"},E={class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg mt-20 mb-8"},Q={class:"flex justify-center md:justify-end -mt-16"},F=["alt","src"],G={class:"text-gray-800 text-3xl font-semibold"},H={class:"text-sm font-normal"},J={class:"w-full mb-4 text-gray-600 flex rounded bg-white shadow-md"},K={key:0,class:"w-full flex justify-center"},P={key:0,class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg mb-20"},W={key:1,class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg mb-20"},X={class:"flex justify-center my-2"},Y={class:"my-4 text-gray-600"},Z={class:"font-normal"},ee={key:0,class:"my-4 text-gray-600"},se={key:2,class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg mb-20"},te={class:"flex justify-center my-2"},oe={class:"my-4 text-gray-600"},ae={class:"font-normal"},ie={__name:"RoomSubmissionView",setup(le){const C=B(),h=R(),{roomCode:c}=C.params,m=f(!1),l=f(!1),y=f(""),n=f(""),d=w({label:"",description:"",backgroundImage:""}),t=w({code:"",roomCode:"",createdAt:"",updatedAt:""}),v=_(()=>l.value&&t.roomCode===c),V=_(()=>{const{backgroundImage:o}=d;return{backgroundImage:`url(${o})`,filter:"brightness(0.3)",height:"100vh"}});D(n,o=>{o!==t.code&&(l.value=!1,t.code="",t.roomCode="")});const $=async()=>{if(!n.value){y.value="請輸入驗證碼";return}if(l.value){n.value="";return}t.code=n.value,m.value=!0,l.value=!0;try{const o=await h.get(`rooms/${c}/submissions/${t.code}`).json();Object.assign(t,o)}catch(o){console.error(o)}m.value=!1};return S(async()=>{const o=await h.get(`rooms/${c}`).json();Object.assign(d,o)}),(o,s)=>(a(),r("div",null,[e("div",{style:A(V.value)},null,4),e("div",U,[e("div",q,[e("div",E,[e("div",Q,[e("img",{alt:d.label,src:d.backgroundImage,class:"w-20 h-20 object-cover rounded-full border-2 border-white-500"},null,8,F)]),e("h2",G,[p(i(d.label)+" ",1),e("span",H,i(u(c)),1)]),s[2]||(s[2]=e("p",{class:"mt-6 text-gray-600"}," 社群加入申請管理系統 ",-1)),s[3]||(s[3]=e("p",{class:"mt-6 text-gray-600"}," 請輸入對方提供的驗證碼： ",-1)),e("div",J,[I(e("input",{"onUpdate:modelValue":s[0]||(s[0]=b=>n.value=b),placeholder:"pmShBo2Bg",class:"h-12 w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none text-gray-500",type:"text"},null,512),[[N,n.value]]),e("button",{class:"m-2 rounded px-4 py-2 font-semibold",onClick:$},[m.value?(a(),x(j,{key:0,class:"h-6 w-6 animate-spin"})):l.value?(a(),x(u(M),{key:1,class:"h-6 w-6"})):(a(),x(u(z),{key:2,class:"h-6 w-6"}))])])])]),l.value?(a(),r("div",K,[m.value?(a(),r("div",P,[g(j,{class:"w-14 h-14 animate-spin"})])):v.value?(a(),r("div",W,[e("div",X,[g(u(L),{class:"w-14 h-14 rounded-full bg-white border-2 border-white-500"})]),s[5]||(s[5]=e("h3",{class:"text-gray-800 text-xl font-semibold"}," 驗證碼有效 ",-1)),e("p",Y,[s[4]||(s[4]=p(" 驗證碼： ")),e("span",Z,i(t.code),1)]),v.value?(a(),r("p",ee," 申請時間："+i(new Date(t.createdAt).toLocaleString()),1)):k("",!0)])):(a(),r("div",se,[e("div",te,[g(u(O),{class:"w-14 h-14 rounded-full bg-white border-2 border-white-500"})]),s[7]||(s[7]=e("h3",{class:"text-gray-800 text-xl font-semibold"}," 驗證碼無效 ",-1)),e("p",oe,[s[6]||(s[6]=p(" 驗證碼： ")),e("span",ae,i(t.code),1)])]))])):k("",!0)]),g(T,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=b=>y.value=b)},null,8,["modelValue"])]))}};export{ie as default};
