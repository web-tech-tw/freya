import{x as A,u as V,r as i,f as S,e as u,q as C,o as l,c as b,a as e,n as R,h as g,t as d,l as m,k as _,i as j,m as O,p as H}from"./index-c1e4986d.js";import{u as N,_ as $}from"./LoadingCircleIcon-b3e772d0.js";import{_ as M}from"./ToastModal-405cefdc.js";const B={class:"absolute top-36 flex w-full justify-center"},D={class:"max-w-md py-4 px-8 bg-white shadow-lg rounded-lg my-20"},L={class:"flex justify-center md:justify-end -mt-16"},U=["alt","src"],Y={class:"text-gray-800 text-3xl font-semibold"},F={class:"text-sm font-normal"},z={class:"mt-6 text-gray-600"},K={class:"mt-6 text-gray-600"},q=["innerHTML"],P={class:"w-full mb-4 text-gray-600 flex rounded bg-white shadow-md"},G=["value"],J={class:"flex justify-end mt-8"},Q={key:1},te={__name:"RoomManageView",setup(W){const{VITE_FREYA_INTE_HOST:y}={VITE_HOME_INTE_HOST:"https://web-tech.tw",VITE_SARA_INTE_HOST:"https://web-tech.tw/sara",VITE_SARA_TOKEN_NAME:"unified_token",VITE_FREYA_INTE_HOST:"https://web-tech.tw/freya",VITE_FREYA_RECV_HOST:"https://web-tech.tw/recv/freya",VITE_TURNSTILE_SITE_KEY:"0x4AAAAAAAz8kwCfcwYC8fgp",BASE_URL:"/freya/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=A(),v=V(),f=N(),{roomCode:n}=h.params,r=i(!1),c=i(!1),o=i(""),s=S({label:"",members:0,description:"",backgroundImage:""}),p=u(()=>`${y}/#/ti/g2/${n}`),x=u(()=>{const{description:t}=s;return t==null?void 0:t.replaceAll(`
`,"<br />")}),w=u(()=>{const{backgroundImage:t}=s;return{backgroundImage:`url(${t})`,filter:"brightness(0.3)",height:"100vh"}}),E=async()=>{if(!navigator.clipboard){o.value="您的瀏覽器不支援複製功能";return}try{await navigator.clipboard.writeText(p.value),o.value="已複製邀請網址",c.value=!0,setTimeout(()=>{c.value=!1},3e3)}catch(t){o.value="無法複製邀請網址",console.error(t)}},T=async()=>{r.value=!0;const t=await f.patch(`rooms/${n}`).json();Object.assign(s,t),o.value="更新成功",r.value=!1},k=()=>{v.push(`/rooms/${n}/submissions`)};return C(async()=>{const t=await f.get(`rooms/${n}`).json();Object.assign(s,t)}),(t,a)=>(l(),b("div",null,[e("div",{style:R(w.value)},null,4),e("div",B,[e("div",D,[e("div",L,[e("img",{alt:s.label,src:s.backgroundImage,class:"w-20 h-20 object-cover rounded-full border-2 border-white-500"},null,8,U)]),e("div",null,[e("h2",Y,[g(d(s.label)+" ",1),e("span",F,d(m(n)),1)]),e("p",z," 成員人數："+d(s.members),1),e("div",K,[a[1]||(a[1]=g(" 簡介： ")),e("p",{class:"my-2 mx-1 text-gray-800 text-sm",innerHTML:x.value},null,8,q)]),a[2]||(a[2]=e("p",{class:"mt-4 text-gray-600"}," 社群邀請網址： ",-1)),e("div",P,[e("input",{value:p.value,class:"h-12 w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none text-gray-500",type:"text",readonly:""},null,8,G),e("button",{title:"複製",class:"m-2 rounded px-4 py-2 font-semibold",onClick:E},[c.value?(l(),_(m(O),{key:0,class:"h-6 w-6"})):(l(),_(m(H),{key:1,class:"h-6 w-6"}))])])]),e("div",J,[e("button",{class:"flex items-center justify-center bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-full mr-3",onClick:T},[r.value?(l(),_($,{key:0,class:"h-6 w-6 animate-spin"})):(l(),b("span",Q," 更新資訊 "))]),e("button",{class:"flex items-center justify-center bg-green-700 hover:bg-green-800 text-white font-bold py-2 px-4 rounded-full",onClick:k}," 進入審核系統 ")])])]),j(M,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=I=>o.value=I)},null,8,["modelValue"])]))}};export{te as default};
